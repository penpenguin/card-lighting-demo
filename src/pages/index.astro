<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Card Lighting Demo</title>
		<style>
			:root {
				--rx: 0deg;
				--ry: 0deg;
				--mx: 50%;
				--my: 50%;
				--hover: 0;
				--tilt-x-max: 12;
				--tilt-y-max: 14;
				--shine-max: 0.35;
				--foil-max: 0.08;
				--holo-intensity: 0;
				--holo-strength: 0.55;
				--prism-strength: 0.85;
				--prism-density: 6;
				--light-angle: 0deg;
				--light-strength: 1;
				--lookPreset: hybrid;
				color-scheme: dark;
			}

			*,
			*::before,
			*::after {
				box-sizing: border-box;
			}

			body {
				margin: 0;
				min-height: 100vh;
				display: grid;
				place-items: center;
				font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
				background: radial-gradient(circle at 30% 20%, rgba(120, 130, 160, 0.18), transparent 26%),
					radial-gradient(circle at 80% 70%, rgba(40, 50, 70, 0.35), transparent 38%),
					#06070c;
				color: #e9ecf2;
			}

			.sr-only {
				position: absolute;
				width: 1px;
				height: 1px;
				padding: 0;
				margin: -1px;
				overflow: hidden;
				clip: rect(0, 0, 0, 0);
				white-space: nowrap;
				border: 0;
			}

			.stage {
				position: relative;
				width: min(1100px, 96vw);
				height: min(720px, 86vh);
				display: grid;
				place-items: center;
				perspective: 1100px;
				isolation: isolate;
				overflow: hidden;
			}

			.stage::before {
				content: "";
				position: absolute;
				inset: 0;
				background:
					radial-gradient(circle at var(--mx) var(--my), rgba(120, 140, 200, 0.24), transparent 42%),
					radial-gradient(120% 120% at 50% 50%, rgba(0, 0, 0, 0.35), transparent 68%);
				filter: blur(14px) brightness(calc(0.6 + 0.6 * var(--light-strength)));
				z-index: 0;
			}

			.card {
				position: relative;
				width: 360px;
				height: 220px;
				border-radius: 22px;
				transform-style: preserve-3d;
				background: #0c0f17;
				box-shadow:
					0 32px 80px rgba(0, 0, 0, 0.72),
					0 12px 26px rgba(0, 0, 0, 0.55),
					0 3px 8px rgba(0, 0, 0, 0.38);
				transform: rotateX(var(--rx)) rotateY(var(--ry)) translateZ(16px);
				transition: box-shadow 260ms ease;
				overflow: hidden;
				z-index: 1;
			}

			.card:hover {
				box-shadow:
					0 40px 86px rgba(0, 0, 0, 0.78),
					0 16px 34px rgba(0, 0, 0, 0.62),
					0 4px 10px rgba(0, 0, 0, 0.42);
			}

			.layer {
				position: absolute;
				inset: 0;
				border-radius: inherit;
				pointer-events: none;
			}

			.layer-shadow {
				background: radial-gradient(90% 120% at 50% 80%, rgba(0, 0, 0, 0.55), transparent 70%);
				filter: blur(10px);
				transform: translateZ(1px);
			}

			.layer-base {
				background: linear-gradient(145deg, #0b0d15 0%, #11182a 50%, #0a0d16 100%);
				transform: translateZ(2px);
			}

			.layer-coat {
				background: linear-gradient(160deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.02) 45%, rgba(255, 255, 255, 0));
				mix-blend-mode: screen;
				opacity: 0.8;
				transform: translateZ(4px);
			}

			.layer-texture {
				background:
					repeating-linear-gradient(90deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.05) 1px, transparent 1px, transparent 4px),
					repeating-linear-gradient(0deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0.03) 1px, transparent 1px, transparent 3px);
				mix-blend-mode: overlay;
				opacity: 0.18;
				filter: contrast(1.05);
				transform: translateZ(3px);
			}

			.layer-foil {
				background: conic-gradient(
					from 120deg at var(--mx) var(--my),
					rgba(255, 210, 120, 0.25),
					rgba(120, 180, 255, 0.18),
					rgba(255, 140, 200, 0.22),
					rgba(255, 210, 120, 0.25)),
					conic-gradient(
						from 0deg at 50% 50%,
						rgba(255, 255, 255, calc(0.12 * var(--holo-intensity))),
						rgba(120, 220, 255, calc(0.22 * var(--holo-intensity))),
						rgba(255, 120, 220, calc(0.16 * var(--holo-intensity))),
						rgba(255, 255, 255, calc(0.12 * var(--holo-intensity)))
					);
				mix-blend-mode: screen;
				opacity: calc(
					0.05
					+ var(--foil-max) * (0.35 + 0.65 * var(--hover))
					+ 0.12 * var(--holo-intensity)
				);
				filter: saturate(1.2);
				transform: translateZ(8px);
				filter: saturate(1.2) hue-rotate(var(--light-angle));
			}

			.layer-holo {
				background: conic-gradient(
					from 20deg at 50% 50%,
					rgba(255, 255, 255, 0.22),
					rgba(76, 227, 255, 0.35),
					rgba(255, 120, 220, 0.32),
					rgba(255, 255, 255, 0.22)
				);
				mix-blend-mode: color-dodge;
				opacity: calc(var(--holo-strength) * (0.10 + 0.45 * var(--hover)) * (0.5 + 0.5 * var(--light-strength)) * var(--holo-intensity));
				filter: saturate(1.15) brightness(1.05) blur(0.15px);
				mask-image: radial-gradient(130% 120% at 50% 50%, #000 60%, transparent 100%);
				mask-image: radial-gradient(125% 115% at var(--mx) var(--my), rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0.7) 40%, transparent 68%);
				transform: translateZ(9px);
				filter: saturate(1.6) blur(0.15px) hue-rotate(var(--light-angle));
			}

			.layer-prism {
				transform: translateZ(9.5px);
				mix-blend-mode: screen;
				pointer-events: none;
				background:
					repeating-linear-gradient(
						135deg,
						rgba(255, 255, 255, 0.06) 0,
						rgba(255, 255, 255, 0.06) 2px,
						transparent 2px,
						transparent 12px
					),
					repeating-linear-gradient(
						135deg,
						rgba(120, 200, 255, 0.04) 0,
						rgba(120, 200, 255, 0.04) 1px,
						transparent 1px,
						transparent 9px
					);
				background-size: calc(var(--prism-density) * 8px) calc(var(--prism-density) * 8px);
				opacity: calc(var(--prism-strength) * (0.18 + 0.35 * var(--hover)) * (0.45 + 0.55 * var(--light-strength)));
				filter: saturate(1.35) brightness(1.12);
			}

			.layer-shine {
				background: radial-gradient(
						220px 160px at var(--mx) var(--my),
						rgba(255, 255, 255, 0.55),
						rgba(255, 255, 255, 0.18) 32%,
						rgba(255, 255, 255, 0) 65%
					),
					radial-gradient(420px 320px at var(--mx) var(--my), rgba(255, 255, 255, 0.16), rgba(255, 255, 255, 0) 70%);
				mix-blend-mode: screen;
				opacity: calc((0.12 + var(--shine-max) * var(--hover)) * (0.75 + 0.35 * var(--light-strength)));
				filter: blur(0.4px) hue-rotate(var(--light-angle));
				transform: translateZ(10px);
			}

			.layer-rim {
				background: linear-gradient(130deg, rgba(255, 255, 255, 0.35), rgba(120, 180, 255, 0.35), rgba(255, 210, 120, 0.4));
				mix-blend-mode: screen;
				mask-image:
					linear-gradient(#000, #000),
					radial-gradient(circle, transparent 68%, #000 72%);
				mask-composite: exclude;
				-webkit-mask-composite: xor;
				opacity: 0.42;
				transform: translateZ(11px);
			}

			.content {
				position: relative;
				height: 100%;
				padding: 22px 26px;
				display: grid;
				grid-template-rows: auto 1fr auto;
				transform: translateZ(14px);
			}

			.logo {
				font-size: 18px;
				font-weight: 700;
				letter-spacing: 0.14em;
				text-transform: uppercase;
				background: linear-gradient(90deg, #f7e7b4, #d2b06f, #f7e7b4);
				-webkit-background-clip: text;
				color: transparent;
				text-shadow: 0 1px 0 rgba(0, 0, 0, 0.35), 0 -1px 0 rgba(255, 255, 255, 0.08);
			}

			.chip {
				justify-self: end;
				width: 46px;
				height: 34px;
				border-radius: 8px;
				background: linear-gradient(135deg, #1c1f2b, #0f121b);
				box-shadow: inset 0 1px 1px rgba(255, 255, 255, 0.22), inset 0 -2px 3px rgba(0, 0, 0, 0.55);
				position: relative;
			}

			.chip::before,
			.chip::after {
				content: "";
				position: absolute;
				inset: 7px 8px;
				border-radius: 4px;
				background: linear-gradient(90deg, rgba(255, 215, 170, 0.65), rgba(120, 150, 180, 0.25));
				mask: linear-gradient(90deg, #000 0 30%, transparent 30% 70%, #000 70% 100%);
			}

			.subtitle {
				align-self: end;
				font-size: 13px;
				letter-spacing: 0.08em;
				color: rgba(233, 236, 242, 0.72);
			}

			.meta {
				font-size: 11px;
				color: rgba(233, 236, 242, 0.55);
				letter-spacing: 0.08em;
			}

			@media (prefers-reduced-motion: reduce) {
				.card {
					transition: none;
					transform: none;
				}
			}

			.pane-host {
				position: fixed;
				top: 16px;
				right: 16px;
				width: 280px;
				z-index: 10;
			}

			@media (max-width: 640px) {
				.pane-host {
					position: static;
					width: min(92vw, 320px);
					margin: 12px auto 0;
				}
			}
		</style>
	</head>
	<body>
		<h1 class="sr-only">Card Lighting Demo</h1>
		<div id="pane-host" class="pane-host" aria-hidden="true"></div>
		<main class="stage">
			<div class="card" id="card">
				<div class="layer layer-shadow"></div>
				<div class="layer layer-base"></div>
				<div class="layer layer-coat"></div>
				<div class="layer layer-texture"></div>
				<div class="layer layer-foil"></div>
				<div class="layer layer-holo"></div>
				<canvas class="layer layer-prism" id="prism-canvas"></canvas>
				<div class="layer layer-shine"></div>
				<div class="layer layer-rim"></div>

				<div class="content">
					<div class="logo">Card Lighting</div>
					<div class="chip" aria-hidden="true"></div>
					<div class="subtitle">Specular study</div>
					<div class="meta">CSS × Light × Tilt</div>
				</div>
			</div>
		</main>

			<script type="module" src="/src/scripts/card-lighting.ts"></script>
		</body>
	</html>
